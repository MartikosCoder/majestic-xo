(function(e){function t(t){for(var n,a,o=t[0],c=t[1],d=t[2],h=0,f=[];h<o.length;h++)a=o[h],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return r.push.apply(r,d||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(n=!1)}n&&(r.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},s={app:0},r=[];function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var l=c;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"160c":function(e,t,i){},"341f":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);var n=i("7a23");function s(e,t,i,s,r,a){const o=Object(n["k"])("Panel"),c=Object(n["k"])("Field");return Object(n["h"])(),Object(n["c"])(n["a"],null,[Object(n["e"])(o),Object(n["e"])(c)],64)}var r=i("df84"),a=i.n(r);const o={class:"score"},c={class:"current"},d={class:"best"},l={class:"controls"},h=Object(n["d"])("img",{src:a.a,alt:""},null,-1),f=[h];function u(e,t,i,s,r,a){return Object(n["h"])(),Object(n["c"])("nav",null,[Object(n["d"])("section",o,[Object(n["d"])("div",c,"Current: "+Object(n["l"])(e.allScore.score),1),Object(n["d"])("div",d,"Best: "+Object(n["l"])(e.allScore.bestScore),1)]),Object(n["d"])("section",l,[Object(n["d"])("div",{class:Object(n["g"])(["controls-btn play",{disabled:e.isStarted}]),onClick:t[0]||(t[0]=(...t)=>e.start&&e.start(...t))},f,2)])])}var b=i("5502"),A={name:"Panel",computed:{...Object(b["c"])(["allScore","isStarted"])},methods:{...Object(b["b"])(["start"])}},g=(i("b23b"),i("6b0d")),k=i.n(g);const p=k()(A,[["render",u]]);var m=p;function y(e,t,i,s,r,a){return Object(n["h"])(),Object(n["c"])("main",null,[(Object(n["h"])(!0),Object(n["c"])(n["a"],null,Object(n["j"])(r.field,(e,t)=>(Object(n["h"])(),Object(n["c"])("div",{class:"row",key:"r-"+t},[(Object(n["h"])(!0),Object(n["c"])(n["a"],null,Object(n["j"])(e,(e,i)=>(Object(n["h"])(),Object(n["c"])("div",{class:Object(n["g"])(["block",{"snake-head":1===e,"snake-body":2===e,point:3===e}]),key:"r-c-"+i,ref_for:!0,ref:`block-${i}-${t}`},null,2))),128))]))),128))])}i("caad");var S={name:"Field",data(){return{field:[],snakeHead:{x:0,y:0},snakeBody:[],points:[],allowedKeys:[87,65,83,68],direction:null,fieldSize:4,pointsLimit:3,gameTimer:null,fps:2}},computed:{...Object(b["c"])(["isStarted"])},created(){this.field=Array.from(Array(this.fieldSize),()=>new Array(this.fieldSize).fill(0)),window.addEventListener("keyup",this.initLogic)},watch:{isStarted(e){e&&this.startGame()}},methods:{...Object(b["b"])(["addScore","resetScore","reset"]),getRandomInt(e,t){const i=e+Math.random()*(t+1-e);return Math.floor(i)},startGame(){this.snakeHead=this.getRandomPoint(),this.field[this.snakeHead.y][this.snakeHead.x]=1,this.gameTimer=requestAnimationFrame(this.gameTick)},resetGame(){this.field=Array.from(Array(this.fieldSize),()=>new Array(this.fieldSize).fill(0)),this.snakeHead={x:0,y:0},this.snakeBody=[],this.points=[],this.direction=null,cancelAnimationFrame(this.gameTimer),this.gameTimer=null,this.reset()},initLogic(e){this.isStarted&&this.allowedKeys.includes(e.keyCode)&&(this.direction=e.keyCode)},getRandomPoint(){return{x:this.getRandomInt(0,this.fieldSize-1),y:this.getRandomInt(0,this.fieldSize-1)}},collidePoints(e,t){return e.x===t.x&&e.y===t.y},gameTick(){if(!this.isStarted)return;const e={...this.snakeHead},t=this.snakeBody.length?{...this.snakeBody[this.snakeBody.length-1]}:null;87===this.direction&&this.snakeHead.y--,65===this.direction&&this.snakeHead.x--,83===this.direction&&this.snakeHead.y++,68===this.direction&&this.snakeHead.x++;const i=this.snakeHead.x>this.fieldSize-1||this.snakeHead.x<0||this.snakeHead.y>this.fieldSize-1||this.snakeHead.y<0,n=this.snakeBody.some(e=>e.x===this.snakeHead.x&&e.y===this.snakeHead.y);if(i||n)return this.resetScore(),void setTimeout(this.resetGame,500);if(this.snakeBody.length){for(let e=this.snakeBody.length-1;e>0;e--)this.snakeBody[e]={...this.snakeBody[e-1]};this.snakeBody[0]=e}const s=this.getRandomInt(0,100);if(s>75&&this.points.length<this.pointsLimit){let e=this.getRandomPoint();!this.collidePoints(e,this.snakeHead)&&this.snakeBody.every(t=>!this.collidePoints(e,t))&&this.points.every(t=>!this.collidePoints(e,t))&&this.points.push(e)}for(const r in this.points)this.collidePoints(this.points[r],this.snakeHead)&&(this.addScore(),this.points.splice(r,1),this.snakeBody.push(t||e));this.render(),setTimeout(()=>{this.gameTimer=requestAnimationFrame(this.gameTick)},1e3/this.fps)},render(){this.field=Array.from(Array(this.fieldSize),()=>new Array(this.fieldSize).fill(0)),this.field[this.snakeHead.y][this.snakeHead.x]=1;for(const e of this.snakeBody)this.field[e.y][e.x]=2;for(const e of this.points)this.field[e.y][e.x]=3},smoothMoveRight(e,t){let i=0;const n=setInterval(()=>{i++,e.style.background=`linear-gradient(90deg, #fff ${i}%, green 0%)`,t.style.background=`linear-gradient(-90deg, #fff ${100-i}%, green 0%)`,100===i&&clearInterval(n)},1e3/60)},smoothMoveLeft(e,t){let i=0;const n=setInterval(()=>{i++,e.style.background=`linear-gradient(-90deg, #fff ${i}%, green 0%)`,t.style.background=`linear-gradient(90deg, #fff ${100-i}%, green 0%)`,100===i&&clearInterval(n)},1e3/60)},smoothMoveUp(e,t){let i=0;const n=setInterval(()=>{i++,e.style.background=`linear-gradient(-0deg, #fff ${i}%, green 0%)`,t.style.background=`linear-gradient(#fff ${100-i}%, green 0%)`,100===i&&clearInterval(n)},1e3/60)},smoothMoveDown(e,t){let i=0;const n=setInterval(()=>{i++,e.style.background=`linear-gradient(#fff ${i}%, green 0%)`,t.style.background=`linear-gradient(-0deg, #fff ${100-i}%, green 0%)`,100===i&&clearInterval(n)},1e3/60)}}};i("89c2");const O=k()(S,[["render",y]]);var v=O,j={name:"App",components:{Panel:m,Field:v}};i("ec1c");const w=k()(j,[["render",s]]);var T=w,C=Object(b["a"])({state:{score:0,bestScore:0,isStarted:!1},mutations:{ADD_SCORE(e){e.score++},RESET_SCORE(e){e.bestScore=Math.max(e.bestScore,e.score),e.score=0},SET_IS_STARTED(e,t){e.isStarted=t}},getters:{allScore(e){return{score:e.score,bestScore:e.bestScore}},isStarted(e){return e.isStarted}},actions:{addScore({commit:e}){e("ADD_SCORE")},resetScore({commit:e}){e("RESET_SCORE")},start({commit:e,state:t}){t.isStarted||e("SET_IS_STARTED",!0)},reset({commit:e,state:t}){t.isStarted&&e("SET_IS_STARTED",!1)}}});Object(n["b"])(T).use(C).mount("#app")},"89c2":function(e,t,i){"use strict";i("160c")},9624:function(e,t,i){},b23b:function(e,t,i){"use strict";i("341f")},df84:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAC0ElEQVR4nO2bS2gVZxhAzyepraCS0oQKSrGI0KbVTaDQhVTMogtXLro03TUN0gdk0WVb2kXd2S4UdypdNauufMQiYkARIk1aqqEIodkopo9FIKClp4vLUKUa7tyZufNwznr+73HuP3funfkGWlpaWlpanloiy2J1K7ATeADcjoj7uVRVddRh9bS65n/8oX6pbim7vkJRd6jLPpll9VDZdRaGOrNO8w/zvfpS2fXmivpal80nrKpT6kDZteeCOp5SQMK8+mbZ9T+ODSmPf6HHPHuBWfW4OthjjEJIKyDLZXMDMAncVMczxMmVtALyYBtwWr2kvlJC/kcoQ0DCfuCG+pn6bFlFlCkAYBPwKfCTOlZGAWULSNgNzKhn1OF+Jq6KAOh8wR4GFtX31Ez/U7qlSgISngdOApfVkaKTVVFAwj7gR/Ur9bmiklRZAMAzwCfAz+rbRSSouoCEXcA59Tv1xTwD10VAwjvALfUjNZfa6yYAYBA4BlxXR7MGq6OAhFHgmvq1urnXIHUWADAAfAgsqPt6CVB3AQkvAxfVg2kXNkUAwEbglClvyjZJAMAQnStF1zRNAHTuPnVNEwWkookC5tMc3DQBK8B0mgVNEnAfGI+I1TSLmiJgCRiLiLNpF9ZdwN/AN8CeiJjtJUCdH1nNARMRMZclSB13wF/Ax8AbWZuH+u2AaeCDiLibV8C6CLgNHImI83kHrvop8AA4CrxeRPNQ7R1wBXg/In4pMkkVd8CfwATwVtHNQ7V2gMC3wFRE3OtX0qoI+BWYjIgf+p247FNgDficzi+5vjcP5e6AS3Q+9cUSayhlB9wB3o2IA2U3D+kFmCHXP8AJ4NWIOJMhTq6kPQV+7zHPAp1r+tUe11cDdSTlfGCzBiUB1AtdNt+8UVkAdbv62zqNN3tYGkAd8v/j8ivqF9ZsXD7rCxOb6QwvrAFLT80LEy0tLS0tLc3gX8RFMx0oFldfAAAAAElFTkSuQmCC"},ec1c:function(e,t,i){"use strict";i("9624")}});
//# sourceMappingURL=app-legacy.21b982e6.js.map